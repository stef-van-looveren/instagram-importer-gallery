!function(g){Drupal.behaviors.instagram_feed_gallery={attach:function(a){var t=0,e=0,s=g("#instagram-feed-gallery"),i=s.data("users"),r=s.data("hashtags");m(t,i,r),g(document).on("click",".ifg-load-more",function(a){m(t+=1,i,r)});var n=document.querySelectorAll(".pswp")[0],l=[],d={index:e,timeToIdle:2e3,preload:[0,0]};function m(a,e,i){var r="&field_instagram_username_value="+e.replace("+","%20"),n="&field_instagram_hashtag_value="+i.replace("+","%20");g.ajax({type:"GET",url:"/instagram-feed-gallery-json?page="+a+r+n,data:{get_param:"value"},dataType:"json",success:function(a){var e,i,r;e=a,r=window.location.hostname,console.log(r),"stefvanlooveren.me"==r&&(i=e.length,g(".ifg-loading").remove(),g(".ifg-load-more").remove(),g.each(e,function(a,e){var i,r;e.field_instagram_image&&(i={src:e.field_instagram_image[0].url,link:e.field_instagram_link[0].uri,title:'<div class="pop-up-instagram-card-user-image-container"><a class="instagram-card-user-name" href="https://instagram.com/'+e.field_instagram_username[0].value+'"><div class="pop-up-instagram-card-user-image"><img src="'+e.field_instagram_avatar[0].url+'"></div></a></div></div>'+e.title[0].value+' <a target="_blank" href="'+e.field_instagram_link[0].uri+'">'+Drupal.t("View post")+"</a>",w:800,h:800},r=a+24*t,l.push(i),g(".instagram-card-item-"+r).length||(s.append('<div class="instagram-card instagram-card-item-'+r+'" style="display:none;" data-index="'+r+'"><div class="instagram-card-header animated fadeIn" style="display:none;"><div class="instagram-card-title"><div class="instagram-card-user-image"><img src="'+e.field_instagram_avatar[0].url+'"></div>'+e.title[0].value+'</div></div><div class="instagram-card-image"><img src="'+e.field_instagram_image[0].url+'" data-index="'+a+'"   /></div></div>'),g(".instagram-card-item-"+r).delay(50*a).fadeIn("slow")))}),24==i&&s.after('<span class="ifg-load-more"><span class="ifg-load-more-inner">Load more items</span></span>'))}})}g(a).once().on("click",".instagram-card",function(a){e=g(this).data("index"),d.index=parseInt(e),new PhotoSwipe(n,InstagramImporterGalleryUiDefault,l,d).init(),event.preventDefault()})}}}(jQuery);
