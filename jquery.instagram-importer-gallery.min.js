!function(a){Drupal.behaviors.instagram_feed_gallery={attach:function(e){var i=0,r=0,t=a("#instagram-feed-gallery"),n=t.data("users"),s=t.data("hashtags");c(i,n,s),a(document).on("click",".ifg-load-more",function(a){c(i+=1,n,s)});var l=document.querySelectorAll(".pswp")[0],d=[],m={index:r,timeToIdle:2e3,preload:[0,0]};function g(e){var r=e.length;a(".ifg-loading").remove(),a(".ifg-load-more").remove();a.each(e,function(e,r){if(r.field_instagram_image){var n={src:r.field_instagram_image[0].url,link:r.field_instagram_link[0].uri,title:'<div class="pop-up-instagram-card-user-image-container"><a class="instagram-card-user-name" href="https://instagram.com/'+r.field_instagram_username[0].value+'"><div class="pop-up-instagram-card-user-image"><img src="'+r.field_instagram_avatar[0].url+'"></div></a></div></div>'+r.title[0].value+' <a target="_blank" href="'+r.field_instagram_link[0].uri+'">'+Drupal.t("View post")+"</a>",w:800,h:800},s=e+24*i;d.push(n),a(".instagram-card-item-"+s).length||(t.append('<div class="instagram-card instagram-card-item-'+s+'" style="display:none;" data-index="'+s+'"><div class="instagram-card-header animated fadeIn" style="display:none;"><div class="instagram-card-title"><div class="instagram-card-user-image"><img src="'+r.field_instagram_avatar[0].url+'"></div>'+r.title[0].value+'</div></div><div class="instagram-card-image"><img src="'+r.field_instagram_image[0].url+'" data-index="'+e+'"   /></div></div>'),a(".instagram-card-item-"+s).delay(50*e).fadeIn("slow"))}}),24==r&&t.after('<span class="ifg-load-more"><span class="ifg-load-more-inner">Load more items</span></span>')}function c(e,i,r){var t="&field_instagram_username_value="+i.replace("+","%20"),n="&field_instagram_hashtag_value="+r.replace("+","%20");a.ajax({type:"GET",url:"/instagram-feed-gallery-json?page="+e+t+n,data:{get_param:"value"},dataType:"json",success:function(a){g(a)}})}a(e).once().on("click",".instagram-card",function(e){r=a(this).data("index"),m.index=parseInt(r),new PhotoSwipe(l,InstagramImporterGalleryUiDefault,d,m).init(),event.preventDefault()})}}}(jQuery);
